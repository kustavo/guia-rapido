<!DOCTYPE html>

<!-- 
DESCRIÇÃO:
Métodos da Instância - Eventos - vm.$emit

TAGS:
vm.$emit

JSFIDDLE:
https://jsfiddle.net/kustavo/cf95ezet/
-->

<html>

<head>
  <title>eventos</title>
  <script src="https://cdn.jsdelivr.net/npm/vue"></script>
</head>

<body>

  <div id="app">
    <h1>{{ msg }}</h1>
  
    <!-- Fica esperando o evento "clicado", que será tratado pela função desligaComponente2 -->
    <componente1 @clicado="desligaComponente2"></componente1>
    <componente2 v-if="isComponente2Ligado"></componente2>
  </div>

  <script>
  
    Vue.component('componente1', {
    template: `<div id="componente1">
      <h1>{{ msg }}</h1>
      <button @click="acaoBotao">{{ msgBotao }}</button>
    </div>`,
    data() {
      return {
        msg: 'Sou o componente 1',
        msgBotao: 'Botão componente 1, remove conteúdo componete 2'
      }
    },
    methods: {
      acaoBotao: function() {
        this.$emit('clicado', 'Clicado!')
      }
    }
  });

  Vue.component('componente2', {
    template: `<div id="componente2">
      <h1>{{ msg }}</h1>
    </div>`,
    data() {
      return {
        msg: 'Sou o componente 2'
      }
    }
  });

  new Vue({
    el: '#app',
    data: {
      msg: 'Sou o componete pai e possuo dois componetes',
      isComponente2Ligado: true
    },

    methods: {
      desligaComponente2: function(c) {
        this.msg = 'Botão do componente 1 foi ' + c
        this.isComponente2Ligado = false
      }
    }
  });
  
  </script>

</body>