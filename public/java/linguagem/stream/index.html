



<!doctype html>
<html lang="pt" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Guia para consultas rápidas em assuntos relacionados às áreas de programação, desenvolvimento e outras áreas de TI.">
      
      
        <link rel="canonical" href="https://kustavo.github.io/guia-rapido/java/linguagem/stream/">
      
      
        <meta name="author" content="Gustavo Araujo">
      
      <link rel="shortcut icon" href="../../../favicon.svg">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-5.5.14">
    
    
      
        <title>Streams - Guia Rápido</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.d3202873.min.css">
      
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.ff0a5ce4.min.css">
      
      
        
        
        <meta name="theme-color" content="#4051b5">
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:300,400,400i,700%7CUbuntu+Mono&display=fallback">
        <style>body,input{font-family:"Ubuntu",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Ubuntu Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
      <link rel="stylesheet" href="../../../extra.css">
    
    
  
      
    
  <script>document.addEventListener("DOMContentLoaded",function(){document.body.addEventListener("click",function(e){if(e.target instanceof HTMLElement){var t=e.target.closest("a[href^=http]");t&&ga("send","event","outbound","click",t.href)}})})</script>

    
  
  
    
  
  

    <meta property="og:type" content="website">
    <meta property="og:title" content="Guia Rápido - Streams">
    <meta property="og:description" content="Guia para consultas rápidas em assuntos relacionados às áreas de programação, desenvolvimento e outras áreas de TI.">
    <meta property="og:url" content="https://kustavo.github.io/guia-rapido/java/linguagem/stream/">
    <meta property="og:image" content="https://kustavo.github.io/guia-rapido/assets/images/banner.png">
    <meta property="og:image:type" content="image/png">
    <meta property="og:image:width" content="1080">
    <meta property="og:image:height" content="568">
    <link rel="stylesheet" href="../../../assets/stylesheets/home.css">

  </head>
  
  
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#streams" class="md-skip">
          Ir para o conteúdo
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="https://kustavo.github.io/guia-rapido/" title="Guia Rápido" class="md-header-nav__button md-logo" aria-label="Guia Rápido">
      
  <img src="../../../logo.svg" alt="logo">

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            Guia Rápido
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Streams
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Buscar" placeholder="Buscar" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/kustavo/guia-rapido/" title="Ir ao repositório" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://kustavo.github.io/guia-rapido/" title="Guia Rápido" class="md-nav__button md-logo" aria-label="Guia Rápido">
      
  <img src="../../../logo.svg" alt="logo">

    </a>
    Guia Rápido
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/kustavo/guia-rapido/" title="Ir ao repositório" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      .Net
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label=".Net" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        <span class="md-nav__icon md-icon"></span>
        .Net
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../dotnet/erros-solucoes/" title="Erros e soluções" class="md-nav__link">
      Erros e soluções
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Linux
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Linux" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        <span class="md-nav__icon md-icon"></span>
        Linux
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3-1" type="checkbox" id="nav-3-1">
    
    <label class="md-nav__link" for="nav-3-1">
      Shell
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Shell" data-md-level="2">
      <label class="md-nav__title" for="nav-3-1">
        <span class="md-nav__icon md-icon"></span>
        Shell
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../linux/shell/linux-shell/" title="Linux shell" class="md-nav__link">
      Linux shell
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../linux/shell/bash/" title="Bash" class="md-nav__link">
      Bash
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../linux/shell/dash/" title="Dash" class="md-nav__link">
      Dash
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../linux/shell/zsh/" title="Z-shell" class="md-nav__link">
      Z-shell
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../linux/shell/gnome-terminal/" title="Gnome terminal" class="md-nav__link">
      Gnome terminal
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Markdown
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Markdown" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        <span class="md-nav__icon md-icon"></span>
        Markdown
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4-1" type="checkbox" id="nav-4-1">
    
    <label class="md-nav__link" for="nav-4-1">
      MkDocs
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="MkDocs" data-md-level="2">
      <label class="md-nav__title" for="nav-4-1">
        <span class="md-nav__icon md-icon"></span>
        MkDocs
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../markdown/mkdocs/" title="MkDocs" class="md-nav__link">
      MkDocs
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Índice">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Índice
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introducao" class="md-nav__link">
    Introdução
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#streams-x-colecoes" class="md-nav__link">
    Streams x coleções
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#criacao-e-manipulacao" class="md-nav__link">
    Criação e manipulação
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
  
                
                  <a href="https://github.com/kustavo/guia-rapido/edit/master/docs/java/linguagem/stream.md" title="Editar esta página" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                  
                
                
                <h1 id="streams">Streams<a class="headerlink" href="#streams" title="Permanent link">&para;</a></h1>
<div class="toc">
<ul>
<li><a href="#streams">Streams</a><ul>
<li><a href="#introducao">Introdução</a></li>
<li><a href="#streams-x-colecoes">Streams x coleções</a></li>
<li><a href="#criacao-e-manipulacao">Criação e manipulação</a></li>
</ul>
</li>
</ul>
</div>
<h2 id="introducao">Introdução<a class="headerlink" href="#introducao" title="Permanent link">&para;</a></h2>
<p>A API <em>Streams</em>, introduzida no Java 8, é um recurso que permite manipular conjuntos de forma mais simples e concisa de escrever código que resulta em facilidade de manutenção e paralelização sem efeitos indesejados em tempo de execução. Isso se tornou possível graças à incorporação do paradigma funcional, combinado com as expressões <em>lambda</em>. A ideia é iterar sobre essas coleções de objetos e, a cada elemento, realizar alguma ação, seja ela de filtragem, mapeamento, transformação, etc.</p>
<p>De forma sucinta, podemos dizer que <em>stream</em> é uma "sequência de elementos de uma fonte de dados que suporta operações de agregação". Podemos dividir a definição da seguinte forma:  </p>
<ul>
<li>
<p><strong>Sequência de elementos</strong>: Uma <em>stream</em> oferece uma interface para um conjunto de valores sequenciais de um tipo de elemento particular. Apesar disso, as <em>streams</em> não armazenam elementos; estes são calculados sob demanda.</p>
</li>
<li>
<p><strong>Fonte de dados</strong>: As <em>streams</em> tomam seu insumo de uma fonte de dados, como coleções, matrizes ou recursos de E/S.</p>
</li>
<li>
<p><strong>Operações de agregação</strong>: As <em>streams</em> suportam operações do tipo SQL e operações comuns à maioria das linguagens de programação funcionais, como <em>filter</em>, <em>map</em>, <em>reduce</em>, <em>find</em>, <em>match</em> e <em>sorted</em>, entre outras.</p>
</li>
</ul>
<p>Ainda mais, as operações das <em>streams</em> têm duas características fundamentais que as diferenciam das operações com coleções:</p>
<ul>
<li>
<p><strong>Estrutura de processo</strong>: Muitas operações de <em>stream</em> retornam outra <em>stream</em>. Assim, é possível encadear operações para formar um processo mais abrangente (<em>pipeline</em>). Isto, por sua vez, permite algumas otimizações, por exemplo mediante as noções de <em>lazy evaluation</em> e <em>short-circuiting</em>.</p>
</li>
<li>
<p><strong>Lazy evaluation</strong> (avaliação tardia ou "preguiçosa") possibilita que o processamento da cadeia de operações seja executado de forma mais performática, postergando a computação até um ponto em que o resultado seja, de fato, importante, evitando assim cálculos desnecessários.</p>
</li>
<li>
<p><strong>Short-circuiting</strong> (curto circuito) possibilita que o resultado final seja obtido antes que todos os elementos da <em>stream</em> sejam processados. Um exemplo é a chamada ao método <code>limit(n)</code> onde apenas os <code>n</code> primeiros elementos da <em>stream</em> serão processados.</p>
</li>
<li>
<p><strong>Iteração interna</strong>: Diferentemente do trabalho com coleções, em que a iteração é explícita (iteração externa), as operações da <em>stream</em> realizam uma iteração é interna (iteração implícita).</p>
</li>
</ul>
<p>O exemplo abaixo de operações com <em>streams</em> pode ser representado conforme a figura em seguida.</p>
<div class="highlight"><pre><span></span><code><span class="n">List</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">transactionsIds</span> <span class="o">=</span>
    <span class="n">transactions</span><span class="p">.</span><span class="na">stream</span><span class="p">()</span>
    <span class="p">.</span><span class="na">filter</span><span class="p">(</span><span class="n">t</span> <span class="o">-&gt;</span> <span class="n">t</span><span class="p">.</span><span class="na">getType</span><span class="p">()</span> <span class="o">==</span> <span class="n">Transaction</span><span class="p">.</span><span class="na">GROCERY</span><span class="p">)</span>
    <span class="p">.</span><span class="na">sorted</span><span class="p">(</span><span class="n">comparing</span><span class="p">(</span><span class="n">Transaction</span><span class="p">::</span><span class="n">getValue</span><span class="p">).</span><span class="na">reversed</span><span class="p">())</span>
    <span class="p">.</span><span class="na">map</span><span class="p">(</span><span class="n">Transaction</span><span class="p">::</span><span class="n">getId</span><span class="p">)</span>
    <span class="p">.</span><span class="na">collect</span><span class="p">(</span><span class="n">toList</span><span class="p">());</span>
</code></pre></div>

<div class='imagem' markdown='1'>

![java-fluxo-stream](_stream/java-fluxo-stream.jpg)

</div>

<p>Em primeiro lugar, é obtido uma <em>stream</em> da lista de transações chamando o método <code>stream()</code>. A fonte de dados é a lista de transações, que vai fornecer uma listagem de elementos à <em>stream</em>. A seguir, vamos aplicar uma série de operações agregadas à <em>stream</em>: <code>filter</code> (para filtrar elementos segundo um predicado particular), <code>sorted</code> (para ordenar os elementos segundo um comparador) e <code>map</code> (para obter a informação). Todas as operações, com exceção de <code>collect</code>, retornam uma <em>Stream</em>, portanto, é possível encadeá-las e formar um processo, que podemos ver como consulta dos dados da fonte.</p>
<p>Na verdade, nenhuma tarefa é realizada até se chamar a operação <code>collect</code>. Esta última começará a abordar o processo para retornar um resultado (que não será uma <em>Stream</em>; neste caso, trata-se de uma lista <code>List</code>).</p>
<p>Em suma, a API <em>Streams</em> trabalha convertendo uma fonte de dados em uma <em>Stream</em>. Em seguida, realiza o processamento dos dados através das operações intermediárias e, por fim, retorna uma nova coleção ou valor reduzido (<em>map-reduce</em>) com a chamada a uma operação terminal.</p>
<p>As <strong>operações intermediárias</strong> são aquelas que retornam um novo Stream para que novas operações intermediárias sejam realizadas de maneira fluente (encadeadas). Podem ser divididas em dois grupos:</p>
<ul>
<li>
<p><strong>Stateless</strong>: As operações <em>stateless</em>, como <code>filter()</code> e <code>map()</code>, não armazenam o estado do elemento manipulado anteriormente ao processar um novo elemento. Dessa forma, cada elemento pode ser processado independentemente das operações dos outros elementos.</p>
</li>
<li>
<p><strong>Stateful</strong>: As operações <em>stateful</em>, como <code>distinct()</code> e <code>sorted()</code>, podem incorporar o estado do elemento processado anteriormente no processamento de novos elementos.</p>
</li>
</ul>
<p>As <strong>operações terminais</strong> são operações que juntam os resultados de um <em>Stream</em> e retornam um valor ou um objeto. Depois de invocada uma operação terminal, o mesmo Stream não poderá ser alterado por outras operações intermediárias ou executar novas operações terminais. Exemplos: <code>forEach()</code>, <code>sum()</code>, <code>min()</code>, <code>max()</code>, <code>findFirst()</code>, etc.</p>
<div class='importante' markdown='1'>

A API *Streams* suporta a **paralelização** de operações para processar os dados, bastando trocar o método `stream()` por `parallelStream()`. Dessa forma a API *Streams* irá decompor as ações em várias subtarefas, e as operações serão processadas em paralelo, explorando os recursos oferecidos pelos diversos núcleos do processador.

</div>

<h2 id="streams-x-colecoes"><em>Streams</em> x coleções<a class="headerlink" href="#streams-x-colecoes" title="Permanent link">&para;</a></h2>
<p>A noção de coleções já existente em Java e a nova noção de <em>streams</em> se referem a interfaces com sequências de elementos. Então, qual a diferença? Resumindo, as coleções se referem a dados enquanto as <em>streams</em> se referem a cálculos.</p>
<p>A diferença entre coleções e <em>streams</em> tem a ver com quando os cálculos são feitos. As coleções são estruturas de dados armazenados na memória, onde estão todos os valores que a estrutura de dados tem em um momento determinado; cada elemento da coleção deve ser calculado antes de se agregar à coleção. Já as <em>streams</em> são estruturas de dados fixas, cujos elementos são calculados sob demanda.</p>
<p>Quando a interface <code>Collection</code> é usada, o usuário deve se ocupar da iteração (por exemplo, mediante <code>foreach</code>, laço for melhorado); essa abordagem é chamada de iteração externa.</p>
<div class="highlight"><pre><span></span><code><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">transactionIds</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;</span><span class="p">();</span>
    <span class="k">for</span> <span class="p">(</span><span class="n">Transaction</span> <span class="n">t</span> <span class="p">:</span> <span class="n">transactions</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">transactionIds</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">t</span><span class="p">.</span><span class="na">getId</span><span class="p">());</span>  
    <span class="p">}</span>
</code></pre></div>

<p>Em contrapartida, a biblioteca <code>Streams</code> recorre à iteração interna; ela se ocupa da iteração e de armazenar em algum lugar o valor da <em>stream</em> resultante; o usuário só fornece uma função dizendo o que deve ser feito.</p>
<div class="highlight"><pre><span></span><code><span class="n">List</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">transactionIds</span> <span class="o">=</span>
    <span class="n">transactions</span><span class="p">.</span><span class="na">stream</span><span class="p">()</span>
    <span class="p">.</span><span class="na">map</span><span class="p">(</span><span class="n">Transaction</span><span class="p">::</span><span class="n">getId</span><span class="p">)</span>
    <span class="p">.</span><span class="na">collect</span><span class="p">(</span><span class="n">toList</span><span class="p">());</span>
</code></pre></div>

<h2 id="criacao-e-manipulacao">Criação e manipulação<a class="headerlink" href="#criacao-e-manipulacao" title="Permanent link">&para;</a></h2>
<p>A API <em>Streams</em> foi desenvolvida sob o pacote <code>java.util.stream</code>. A forma mais comum de criar uma <code>stream</code> é através de uma coleção de dados, tendo em vista que o principal propósito dessa API é tornar mais flexível e eficiente o processamento de coleções.</p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span> <span class="nn">_stream.exemplo_stream_criacao</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">java.nio.charset.Charset</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">java.nio.file.Files</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">java.nio.file.Paths</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">java.util.*</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">java.util.stream.IntStream</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">java.util.stream.Stream</span><span class="p">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Exemplo</span> <span class="p">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="p">)</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="p">{</span>

        <span class="cm">/*</span>
<span class="cm">         * Stream de uma coleção</span>
<span class="cm">         */</span>
        <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">lista</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="p">();</span>
        <span class="n">lista</span><span class="p">.</span><span class="na">addAll</span><span class="p">(</span><span class="n">Arrays</span><span class="p">.</span><span class="na">asList</span><span class="p">(</span><span class="s">&quot;A&quot;</span><span class="p">,</span> <span class="s">&quot;B&quot;</span><span class="p">,</span> <span class="s">&quot;C&quot;</span><span class="p">));</span>

        <span class="n">Stream</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">streamLista</span> <span class="o">=</span> <span class="n">lista</span><span class="p">.</span><span class="na">stream</span><span class="p">();</span>


        <span class="cm">/*</span>
<span class="cm">         * Stream de um map</span>
<span class="cm">         */</span>
        <span class="n">Map</span><span class="o">&lt;</span><span class="n">Integer</span><span class="p">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">map</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;</span><span class="n">Integer</span><span class="p">,</span> <span class="n">String</span><span class="o">&gt;</span><span class="p">();</span>

        <span class="n">map</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s">&quot;A&quot;</span><span class="p">);</span>
        <span class="n">map</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&quot;B&quot;</span><span class="p">);</span>
        <span class="n">map</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s">&quot;C&quot;</span><span class="p">);</span>

        <span class="n">Stream</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">streamMap</span> <span class="o">=</span> <span class="n">map</span><span class="p">.</span><span class="na">values</span><span class="p">().</span><span class="na">stream</span><span class="p">();</span>


        <span class="cm">/*</span>
<span class="cm">         * Stream de valores, arrays e I/O</span>
<span class="cm">         */</span>
        <span class="n">Stream</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">valores</span> <span class="o">=</span> <span class="n">Stream</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">);</span>

        <span class="n">IntStream</span> <span class="n">array</span> <span class="o">=</span> <span class="n">Arrays</span><span class="p">.</span><span class="na">stream</span><span class="p">(</span><span class="k">new</span> <span class="kt">int</span><span class="o">[]</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">});</span>

        <span class="n">Stream</span> <span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">io</span> <span class="o">=</span> <span class="n">Files</span><span class="p">.</span><span class="na">lines</span><span class="p">(</span><span class="n">Paths</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="s">&quot;Exemplo.java&quot;</span><span class="p">),</span> <span class="n">Charset</span><span class="p">.</span><span class="na">defaultCharset</span><span class="p">());</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<p>Algumas das operações intermediárias mais utilizadas são: <code>filter()</code>, <code>map()</code>, <code>sorted()</code>, <code>limit()</code> e <code>distinct()</code>. Já para operações terminais, podemos citar: <code>forEach</code>, <code>average()</code>, <code>collect()</code>, <code>count()</code> e <code>allMatch()</code>.</p>
<p>Classe que define os elementos da lista dos exemplos de operações intermediárias e terminais.</p>
<div class="highlight"><pre><span></span><code><span class="kd">class</span> <span class="nc">Pessoa</span> <span class="p">{</span>
    <span class="n">String</span> <span class="n">nome</span><span class="p">;</span>
    <span class="n">String</span> <span class="n">nacionalidade</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">idade</span><span class="p">;</span>

    <span class="n">Pessoa</span><span class="p">(){}</span>

    <span class="n">Pessoa</span> <span class="p">(</span><span class="n">String</span> <span class="n">nome</span><span class="p">,</span> <span class="n">String</span> <span class="n">nacionalidade</span><span class="p">,</span> <span class="kt">int</span> <span class="n">idade</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="na">nome</span> <span class="o">=</span> <span class="n">nome</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="na">nacionalidade</span> <span class="o">=</span> <span class="n">nacionalidade</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="na">idade</span> <span class="o">=</span> <span class="n">idade</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="n">List</span><span class="o">&lt;</span><span class="n">Pessoa</span><span class="o">&gt;</span> <span class="nf">populaPessoas</span><span class="p">(){</span>
        <span class="n">Pessoa</span> <span class="n">pessoa1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Pessoa</span><span class="p">(</span><span class="s">&quot;Lucas&quot;</span><span class="p">,</span> <span class="s">&quot;Brasil&quot;</span><span class="p">,</span> <span class="mi">18</span><span class="p">);</span>
        <span class="n">Pessoa</span> <span class="n">pessoa2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Pessoa</span><span class="p">(</span><span class="s">&quot;Hernandez&quot;</span><span class="p">,</span> <span class="s">&quot;Mexico&quot;</span><span class="p">,</span> <span class="mi">21</span><span class="p">);</span>
        <span class="n">Pessoa</span> <span class="n">pessoa3</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Pessoa</span><span class="p">(</span><span class="s">&quot;Jim&quot;</span><span class="p">,</span><span class="s">&quot;Canada&quot;</span><span class="p">,</span> <span class="mi">22</span><span class="p">);</span>
        <span class="n">Pessoa</span> <span class="n">pessoa4</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Pessoa</span><span class="p">(</span><span class="s">&quot;Amanda&quot;</span><span class="p">,</span> <span class="s">&quot;Brasil&quot;</span><span class="p">,</span> <span class="mi">17</span><span class="p">);</span>
        <span class="n">Pessoa</span> <span class="n">pessoa5</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Pessoa</span><span class="p">(</span><span class="s">&quot;Felipe&quot;</span><span class="p">,</span> <span class="s">&quot;Brasil&quot;</span><span class="p">,</span> <span class="mi">22</span><span class="p">);</span>

        <span class="n">List</span><span class="o">&lt;</span><span class="n">Pessoa</span><span class="o">&gt;</span> <span class="n">list</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;</span><span class="p">();</span>
        <span class="n">list</span><span class="p">.</span><span class="na">addAll</span><span class="p">(</span><span class="n">Arrays</span><span class="p">.</span><span class="na">asList</span><span class="p">(</span><span class="n">pessoa1</span><span class="p">,</span> <span class="n">pessoa2</span><span class="p">,</span> <span class="n">pessoa3</span><span class="p">,</span> <span class="n">pessoa4</span><span class="p">,</span> <span class="n">pessoa5</span><span class="p">));</span>
        <span class="k">return</span> <span class="n">list</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">toString</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="na">nome</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">equals</span><span class="p">(</span><span class="n">Object</span> <span class="n">obj</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">((</span><span class="n">Pessoa</span><span class="p">)</span> <span class="n">obj</span><span class="p">).</span><span class="na">getNacionalidade</span><span class="p">().</span><span class="na">equals</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="na">getNacionalidade</span><span class="p">());</span>
    <span class="p">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">hashCode</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="na">getNacionalidade</span><span class="p">().</span><span class="na">hashCode</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="n">String</span> <span class="nf">getNome</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="na">nome</span><span class="p">;</span> <span class="p">}</span>

    <span class="n">String</span> <span class="nf">getNacionalidade</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="na">nacionalidade</span><span class="p">;</span> <span class="p">}</span>

    <span class="kt">int</span> <span class="nf">getIdade</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="na">idade</span><span class="p">;</span> <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<p>Exemplos de operações intermediárias:</p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span> <span class="nn">_stream.exemplo_manipulacao</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">java.util.*</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">java.util.stream.Collectors</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">java.util.stream.Stream</span><span class="p">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ExemploOperacoesIntermediarias</span> <span class="p">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="p">)</span> <span class="p">{</span>

        <span class="n">List</span><span class="o">&lt;</span><span class="n">Pessoa</span><span class="o">&gt;</span> <span class="n">pessoas</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Pessoa</span><span class="p">().</span><span class="na">populaPessoas</span><span class="p">();</span>

        <span class="cm">/*</span>
<span class="cm">         * map(): transformações em uma lista de dados de acordo com uma função (Function)</span>
<span class="cm">         *</span>
<span class="cm">         * Para evitar o overhead de converter um int (tipo primitivo) num Integer(Classe Wrapper),</span>
<span class="cm">         * podemos usar IntStream, DoubleStream e LongStream com mapToInt, mapToDouble e mapToLong</span>
<span class="cm">         * respectivamente</span>
<span class="cm">         */</span>
        <span class="n">Stream</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">sMap</span> <span class="o">=</span> <span class="n">pessoas</span><span class="p">.</span><span class="na">stream</span><span class="p">().</span><span class="na">map</span><span class="p">(</span><span class="n">Pessoa</span><span class="p">::</span><span class="n">getIdade</span><span class="p">);</span>
        <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;map: &quot;</span> <span class="o">+</span> <span class="n">sMap</span><span class="p">.</span><span class="na">collect</span><span class="p">(</span><span class="n">Collectors</span><span class="p">.</span><span class="na">toList</span><span class="p">()));</span>
        <span class="c1">// IntStream sMap = pessoas.stream().mapToInt(Pessoa::getIdade);</span>
        <span class="c1">// System.out.println(sMap.boxed().collect(Collectors.toList()).toString());</span>

        <span class="cm">/*</span>
<span class="cm">         * filter(): é usado para filtrar elementos de uma stream de acordo com uma</span>
<span class="cm">         * condição (Predicate)</span>
<span class="cm">         */</span>
        <span class="n">Stream</span><span class="o">&lt;</span><span class="n">Pessoa</span><span class="o">&gt;</span> <span class="n">sFilter</span> <span class="o">=</span> <span class="n">pessoas</span><span class="p">.</span><span class="na">stream</span><span class="p">()</span>
                <span class="p">.</span><span class="na">filter</span><span class="p">(</span><span class="n">pessoa</span> <span class="o">-&gt;</span> <span class="n">pessoa</span><span class="p">.</span><span class="na">nacionalidade</span><span class="p">.</span><span class="na">equals</span><span class="p">(</span><span class="s">&quot;Brasil&quot;</span><span class="p">));</span>
        <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;filter: &quot;</span> <span class="o">+</span> <span class="n">sFilter</span><span class="p">.</span><span class="na">collect</span><span class="p">(</span><span class="n">Collectors</span><span class="p">.</span><span class="na">toList</span><span class="p">()));</span>

        <span class="cm">/*</span>
<span class="cm">         * sorted(): ordenação de elementos em coleções através da função comparing() que recebe</span>
<span class="cm">         * uma função (Function)</span>
<span class="cm">         */</span>
        <span class="n">Stream</span><span class="o">&lt;</span><span class="n">Pessoa</span><span class="o">&gt;</span> <span class="n">sSorted</span> <span class="o">=</span> <span class="n">pessoas</span><span class="p">.</span><span class="na">stream</span><span class="p">().</span><span class="na">sorted</span><span class="p">(</span><span class="n">Comparator</span><span class="p">.</span><span class="na">comparing</span><span class="p">(</span><span class="n">Pessoa</span><span class="p">::</span><span class="n">getNome</span><span class="p">));</span>
        <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;sorted: &quot;</span> <span class="o">+</span> <span class="n">sSorted</span><span class="p">.</span><span class="na">collect</span><span class="p">(</span><span class="n">Collectors</span><span class="p">.</span><span class="na">toList</span><span class="p">()));</span>

        <span class="cm">/*</span>
<span class="cm">         * distinct(): retorna uma stream contendo apenas elementos que são exclusivos, isto é, que</span>
<span class="cm">         * não se repetem. Para comparação de objetos necessita implementar o equals().</span>
<span class="cm">         */</span>
        <span class="n">Stream</span><span class="o">&lt;</span><span class="n">Pessoa</span><span class="o">&gt;</span> <span class="n">sDistinct</span> <span class="o">=</span> <span class="n">pessoas</span><span class="p">.</span><span class="na">stream</span><span class="p">().</span><span class="na">distinct</span><span class="p">();</span>
        <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;distinct: &quot;</span> <span class="o">+</span> <span class="n">sDistinct</span><span class="p">.</span><span class="na">collect</span><span class="p">(</span><span class="n">Collectors</span><span class="p">.</span><span class="na">toList</span><span class="p">()));</span>

        <span class="cm">/*</span>
<span class="cm">         * limit(): limita o número de elementos em uma stream. É uma operação conhecida como</span>
<span class="cm">         * curto-circuito devido ao fato de não precisar processar todos os elementos.</span>
<span class="cm">         */</span>
        <span class="n">Stream</span><span class="o">&lt;</span><span class="n">Pessoa</span><span class="o">&gt;</span> <span class="n">sLimit</span> <span class="o">=</span> <span class="n">pessoas</span><span class="p">.</span><span class="na">stream</span><span class="p">().</span><span class="na">limit</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
        <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;limit: &quot;</span> <span class="o">+</span> <span class="n">sLimit</span><span class="p">.</span><span class="na">collect</span><span class="p">(</span><span class="n">Collectors</span><span class="p">.</span><span class="na">toList</span><span class="p">()));</span>

        <span class="cm">/*</span>
<span class="cm">         * As operações intermediárias retornam um novo stream que pode ser utilizado por outras</span>
<span class="cm">         * operações intermediárias de forma encadeada.</span>
<span class="cm">         */</span>
        <span class="n">Stream</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">sEncadeada</span> <span class="o">=</span> <span class="n">pessoas</span><span class="p">.</span><span class="na">stream</span><span class="p">()</span>
                <span class="p">.</span><span class="na">filter</span><span class="p">(</span><span class="n">pessoa</span> <span class="o">-&gt;</span> <span class="o">!</span><span class="n">pessoa</span><span class="p">.</span><span class="na">nacionalidade</span><span class="p">.</span><span class="na">equals</span><span class="p">(</span><span class="s">&quot;Brasil&quot;</span><span class="p">))</span>
                <span class="p">.</span><span class="na">distinct</span><span class="p">()</span>
                <span class="p">.</span><span class="na">sorted</span><span class="p">(</span><span class="n">Comparator</span><span class="p">.</span><span class="na">comparing</span><span class="p">(</span><span class="n">Pessoa</span><span class="p">::</span><span class="n">getNacionalidade</span><span class="p">))</span>
                <span class="p">.</span><span class="na">limit</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
                <span class="p">.</span><span class="na">map</span><span class="p">(</span><span class="n">Pessoa</span><span class="p">::</span><span class="n">getNacionalidade</span><span class="p">);</span>

        <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;encadeamento: &quot;</span> <span class="o">+</span> <span class="n">sEncadeada</span><span class="p">.</span><span class="na">collect</span><span class="p">(</span><span class="n">Collectors</span><span class="p">.</span><span class="na">toList</span><span class="p">()));</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Saida</span>
<span class="c1">// &gt; map: [18, 21, 22, 17, 22]</span>
<span class="c1">// &gt; filter: [Lucas, Amanda, Felipe]</span>
<span class="c1">// &gt; sorted: [Amanda, Felipe, Hernandez, Jim, Lucas]</span>
<span class="c1">// &gt; distinct: [Lucas, Hernandez, Jim]</span>
<span class="c1">// &gt; limit: [Lucas, Hernandez]</span>
<span class="c1">// &gt; encadeamento: [Canada, Mexico]</span>
</code></pre></div>

<p>Exemplos de operações terminais:</p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span> <span class="nn">_stream.exemplo_manipulacao</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">java.util.List</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">java.util.stream.Collectors</span><span class="p">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ExemploOperacoesTerminais</span> <span class="p">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="p">)</span> <span class="p">{</span>

        <span class="n">List</span><span class="o">&lt;</span><span class="n">Pessoa</span><span class="o">&gt;</span> <span class="n">pessoas</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Pessoa</span><span class="p">().</span><span class="na">populaPessoas</span><span class="p">();</span>

        <span class="cm">/*</span>
<span class="cm">         * forEach(): realizar um loop sobre todos os elementos de uma stream e executar algum</span>
<span class="cm">         * tipo de processamento.</span>
<span class="cm">         */</span>
        <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">print</span><span class="p">(</span><span class="s">&quot;forEach: &quot;</span><span class="p">);</span>
        <span class="n">pessoas</span><span class="p">.</span><span class="na">stream</span><span class="p">().</span><span class="na">forEach</span><span class="p">(</span><span class="n">pessoa</span> <span class="o">-&gt;</span> <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">print</span><span class="p">(</span><span class="n">pessoa</span><span class="p">.</span><span class="na">getNome</span><span class="p">()</span> <span class="o">+</span> <span class="s">&quot; &quot;</span><span class="p">));</span>
        <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">();</span>

        <span class="cm">/*</span>
<span class="cm">         * collect(): possibilita coletar os elementos de uma stream na forma de coleções,</span>
<span class="cm">         * convertendo uma stream para os tipos List, Set ou Map</span>
<span class="cm">         */</span>
        <span class="n">List</span><span class="o">&lt;</span><span class="n">Pessoa</span><span class="o">&gt;</span> <span class="n">tCollect</span> <span class="o">=</span> <span class="n">pessoas</span><span class="p">.</span><span class="na">stream</span><span class="p">().</span><span class="na">collect</span><span class="p">(</span><span class="n">Collectors</span><span class="p">.</span><span class="na">toList</span><span class="p">());</span>
        <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;collect: &quot;</span> <span class="o">+</span> <span class="n">tCollect</span><span class="p">);</span>

        <span class="n">String</span> <span class="n">tCollectJoining</span> <span class="o">=</span> <span class="n">pessoas</span><span class="p">.</span><span class="na">stream</span><span class="p">()</span>
                <span class="p">.</span><span class="na">map</span><span class="p">(</span><span class="n">Pessoa</span><span class="p">::</span><span class="n">getNome</span><span class="p">)</span>
                <span class="p">.</span><span class="na">collect</span><span class="p">(</span><span class="n">Collectors</span><span class="p">.</span><span class="na">joining</span><span class="p">(</span><span class="s">&quot; / &quot;</span><span class="p">));</span>
        <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;collect joining: &quot;</span> <span class="o">+</span> <span class="n">tCollectJoining</span><span class="p">);</span>

        <span class="cm">/*</span>
<span class="cm">         * average(): permite calcular a média dos valores dos elementos</span>
<span class="cm">         *</span>
<span class="cm">         * Este é um dos métodos aritméticos disponibilizados para tipos primitivos como IntStream,</span>
<span class="cm">         * DoubleStream e LongStream. Podem ser mapeados pelos métodos mapToInt(), mapToDouble() e</span>
<span class="cm">         * mapToLong() respectivamente. O método getAsDouble() é utilizada porque average() retorna</span>
<span class="cm">         * um um Optional</span>
<span class="cm">         */</span>
        <span class="kt">double</span> <span class="n">tAverage</span> <span class="o">=</span> <span class="n">pessoas</span><span class="p">.</span><span class="na">stream</span><span class="p">()</span>
                <span class="p">.</span><span class="na">filter</span><span class="p">(</span><span class="n">pessoa</span> <span class="o">-&gt;</span> <span class="n">pessoa</span><span class="p">.</span><span class="na">getNacionalidade</span><span class="p">().</span><span class="na">equals</span><span class="p">(</span><span class="s">&quot;Brasil&quot;</span><span class="p">))</span>
                <span class="p">.</span><span class="na">mapToInt</span><span class="p">(</span><span class="n">pessoa</span> <span class="o">-&gt;</span> <span class="n">pessoa</span><span class="p">.</span><span class="na">getIdade</span><span class="p">())</span>
                <span class="p">.</span><span class="na">average</span><span class="p">()</span>
                <span class="p">.</span><span class="na">getAsDouble</span><span class="p">();</span>
        <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;average: &quot;</span> <span class="o">+</span> <span class="n">tAverage</span><span class="p">);</span>

        <span class="cm">/*</span>
<span class="cm">         * count(): retorna a quantidade de elementos presentes em uma stream.</span>
<span class="cm">         */</span>
        <span class="kt">long</span> <span class="n">tCount</span> <span class="o">=</span> <span class="n">pessoas</span><span class="p">.</span><span class="na">stream</span><span class="p">().</span><span class="na">count</span><span class="p">();</span>
        <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;count: &quot;</span> <span class="o">+</span> <span class="n">tCount</span><span class="p">);</span>

        <span class="cm">/*</span>
<span class="cm">         * allMatch(): verifica se todos os elementos de uma stream atendem a um critério passado</span>
<span class="cm">         * como parâmetro, através de um Predicate, e retorna um valor booleano.</span>
<span class="cm">         */</span>
        <span class="kt">boolean</span> <span class="n">tAllMatch</span> <span class="o">=</span> <span class="n">pessoas</span><span class="p">.</span><span class="na">stream</span><span class="p">()</span>
                <span class="p">.</span><span class="na">allMatch</span><span class="p">(</span><span class="n">pessoa</span> <span class="o">-&gt;</span> <span class="n">pessoa</span><span class="p">.</span><span class="na">getNacionalidade</span><span class="p">().</span><span class="na">equals</span><span class="p">(</span><span class="s">&quot;Brasil&quot;</span><span class="p">));</span>
        <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;allMatch: &quot;</span> <span class="o">+</span> <span class="n">tAllMatch</span><span class="p">);</span>

        <span class="cm">/*</span>
<span class="cm">         * ifPresent(): se algum valor está presente. Pode ser usado juntamente com filter() mais</span>
<span class="cm">         * findAny() ou findFirst() que retornam um objeto Optional.</span>
<span class="cm">         */</span>
        <span class="n">pessoas</span><span class="p">.</span><span class="na">stream</span><span class="p">()</span>
                <span class="p">.</span><span class="na">filter</span><span class="p">(</span><span class="n">pessoa</span> <span class="o">-&gt;</span> <span class="n">pessoa</span><span class="p">.</span><span class="na">nacionalidade</span><span class="p">.</span><span class="na">equals</span><span class="p">(</span><span class="s">&quot;Mexico&quot;</span><span class="p">))</span>
                <span class="p">.</span><span class="na">findAny</span><span class="p">()</span>
                <span class="p">.</span><span class="na">ifPresent</span><span class="p">(</span><span class="n">p</span> <span class="o">-&gt;</span> <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;ifPresent: &quot;</span> <span class="o">+</span> <span class="n">p</span><span class="p">.</span><span class="na">getNome</span><span class="p">()));</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Saida</span>
<span class="c1">// &gt; forEach: Lucas Hernandez Jim Amanda Felipe</span>
<span class="c1">// &gt; collect: [Lucas, Hernandez, Jim, Amanda, Felipe]</span>
<span class="c1">// &gt; collect joining: Lucas / Hernandez / Jim / Amanda / Felipe</span>
<span class="c1">// &gt; average: 19.0</span>
<span class="c1">// &gt; count: 5</span>
<span class="c1">// &gt; allMatch: false</span>
<span class="c1">// &gt; ifPresent: Hernandez</span>
</code></pre></div>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        <!--
  Copyright (c) 2016-2020 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->



<!-- Application footer -->
<footer class="md-footer">

  <!-- Link to previous and/or next page -->
  

  <!-- Further information -->
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">

      <!-- Copyright and theme information -->
      <div class="md-footer-copyright">
      Guia Rápido - 2020
      </div>

      <!-- Social links -->
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../../assets/javascripts/vendor.2d1db4bd.min.js"></script>
      <script src="../../../assets/javascripts/bundle.6627ddf3.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copiar para \u00e1rea de transfer\u00eancia", "clipboard.copied": "Copiado para \u00e1rea de transfer\u00eancia", "search.config.lang": "pt", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Digite para iniciar a busca", "search.result.none": "Nenhum resultado encontrado", "search.result.one": "1 resultado encontrado", "search.result.other": "# resultados encontrados"}</script>
      
      <script>
        app = initialize({
          base: "../../..",
          features: ['navigation.tabs'],
          search: Object.assign({
            worker: "../../../assets/javascripts/worker/search.5eca75d3.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>